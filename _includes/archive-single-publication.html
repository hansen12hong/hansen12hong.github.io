{% include base_path %}

{% if post.header.teaser %}
  {% capture teaser %}{{ post.header.teaser }}{% endcapture %}
{% else %}
  {% assign teaser = site.teaser %}
{% endif %}

{% if post.id %}
  {% assign title = post.title | markdownify | remove: "<p>" | remove: "</p>" %}
{% else %}
  {% assign title = post.title %}
{% endif %}

<div class="publication-card">
  <!-- Title - Link directly to paper URL -->
  <h3 class="pub-title">
    {% if post.paperurl %}
      <a href="{{ post.paperurl }}" target="_blank">{{ title }}</a>
    {% else %}
      {{ title }}
    {% endif %}
  </h3>

  <!-- Authors (if specified) -->
  {% if post.authors %}
  <p class="pub-authors">{{ post.authors }}</p>
  {% endif %}

  <!-- Venue and Year -->
  <p class="pub-venue">
    {% if post.status == 'Accepted' %}
      <span class="venue-name">{{ post.venue }}</span>, <span class="venue-status">Accepted</span>
    {% elsif post.category == 'manuscripts' or post.category == 'pre_doctoral' %}
      <span class="venue-name">{{ post.venue }}</span>{% if post.venue != 'Working Paper' %}, {{ post.date | date: "%Y" }}{% endif %}
    {% elsif post.status %}
      <span class="venue-status">{{ post.status }}</span> at <span class="venue-name">{{ post.venue }}</span>
    {% else %}
      <span class="venue-name">{{ post.venue }}</span>
    {% endif %}
    {% if post.award %}
      <span class="pub-award">üèÜ {{ post.award }}</span>
    {% endif %}
  </p>

  <!-- Abstract/Excerpt with expandable feature -->
  {% if post.excerpt %}
  <div class="pub-abstract-container">
    <div class="pub-abstract" onclick="this.classList.toggle('expanded')">
      {{ post.excerpt | markdownify | strip_html }}
    </div>
    <span class="pub-read-more" onclick="this.previousElementSibling.classList.toggle('expanded'); this.textContent = this.previousElementSibling.classList.contains('expanded') ? '[Show less]' : '[Read more]';">[Read more]</span>
  </div>
  {% endif %}
</div>

